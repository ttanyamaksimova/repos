---
title: "Практическая работа 2"
author: "tanya.maksimova.2004@yandex.ru"
format: 
  md:
    output-file: README.md
---

## Название

Основы обработки данных с помощью R и Dplyr

## Цель работы

1. Развить практические навыки использования языка программирования R для обработки данных

2. Закрепить знания базовых типов данных языка R

3. Развить практические навыки использования функций обработки данных пакета dplyr – функции select(), filter(), mutate(), arrange(), group_by()


## Исходные данные

1.  Ноутбук с ОС Windows 10
2.  Rstudio Desktop
3.  Интерпретатор R 4.5.1

```{R}
sessionInfo()
```

## Задание

Проанализировать встроенный в пакет dplyr набор данных starwars с помощью языка R и ответить на вопросы:

  - Сколько строк в датафрейме?
  - Сколько столбцов в датафрейме?
  - Как просмотреть примерный вид датафрейма?
  - Сколько уникальных рас персонажей (species) представлено в данных?
  - Найти самого высокого персонажа
  - Найти всех персонажей ниже 170
  - Подсчитать ИМТ (индекс массы тела) для всех персонажей.
  - Найти 10 самых “вытянутых” персонажей. “Вытянутость” оценить по отношению массы (mass) к росту (height) персонажей.
  - Найти средний возраст персонажей каждой расы вселенной Звездных войн.
  - Найти самый распространенный цвет глаз персонажей вселенной Звездных войн.
  - Подсчитать среднюю длину имени в каждой расе вселенной Звездных войн.

Оформить отчет в соответствии с шаблоном.

## Выполнение шагов

### Шаг 1

Установим и подключим пакет dplyr:

```{r}
library(dplyr)
```

### Шаг 2

Проанализируем встроенный в пакет dplyr набор данных starwars с помощью
языка R и ответим на вопросы:

#### Сколько строк в датафрейме?

```{r}
starwars %>% nrow()
```

#### Сколько столбцов в датафрейме?

```{r}
starwars %>% ncol()
```

#### Как просмотреть примерный вид датафрейма?

```{r}
starwars %>% glimpse()
```

#### Сколько уникальных рас персонажей (species) представлено в данных?

```{r}
starwars %>% select(species) %>% filter(!is.na(species)) %>% unique() %>% count() %>% as.data.frame()
```

#### Найти самого высокого персонажа.

```{r}
starwars %>% select(name, height) %>% arrange(desc(height)) %>% head(1) %>% as.data.frame()
```

#### Найти всех персонажей ниже 170.

```{r}
starwars %>% select(name, height) %>% filter(height < 170) %>% as.data.frame()
```

#### Подсчитать ИМТ (индекс массы тела) для всех персонажей.

```{r}
starwars %>% mutate(imt = mass / (height^2)) %>% select(name, imt) %>% as.data.frame()
```

#### Найти 10 самых "вытянутых" персонажей. "Вытянутость" оценить по отношению массы (mass) к росту (height) персонажей.

```{r}
starwars %>% mutate(vyt = mass / height) %>% arrange(vyt) %>% select(name, vyt) %>% head(10) %>% as.data.frame()
```

#### Найти средний возраст персонажей каждой расы вселенной Звездных войн.

```{r}
starwars %>% filter(!is.na(species)) %>% filter(!is.na(birth_year)) %>% group_by(species) %>% summarise(avg_age = mean(100 - birth_year)) %>% select(species, avg_age) %>% as.data.frame()
```

#### Найти самый распространенный цвет глаз персонажей вселенной Звездных войн.

```{r}
starwars %>% group_by(eye_color) %>% summarise(count = n()) %>% arrange(desc(count)) %>% select(eye_color, count) %>% head(1) %>% as.data.frame()
```

#### Подсчитать среднюю длину имени в каждой расе вселенной Звездных войн.

```{r}
starwars %>% filter(!is.na(name)) %>% filter(!is.na(species)) %>% group_by(species) %>% summarise(avg_l = mean(nchar(name))) %>% select(species, avg_l) %>% as.data.frame()
```

## Вывод

В ходе выполнения 2 практической работы были освоены практические навыки использования функций обработки данных пакета dplyr.