---
title: "Практическая работа 3"
author: "tanya.maksimova.2004@yandex.ru"
format: 
  md:
    output-file: README.md
---

## Название

Основы обработки данных с помощью R и Dplyr

## Цель работы

1. Развить практические навыки использования языка программирования R для обработки данных

2. Закрепить знания базовых типов данных языка R

3. Развить практические навыки использования функций обработки данных пакета dplyr – функции select(), filter(), mutate(), arrange(), group_by()


## Исходные данные

1.  Ноутбук с ОС Windows 10
2.  Rstudio Desktop
3.  Интерпретатор R 4.5.1

```{R}
sessionInfo()
```

## Задание

Проанализировать встроенные в пакет nycflights13 наборы данных с помощью языка R и ответить на вопросы:

  - Сколько встроенных в пакет nycflights13 датафреймов?
  - Сколько строк в каждом датафрейме?
  - Сколько столбцов в каждом датафрейме?
  - Как просмотреть примерный вид датафрейма?
  - Сколько компаний-перевозчиков (carrier) учитывают эти наборы данных (представлено в наборах данных)?
  - Сколько рейсов принял аэропорт John F Kennedy Intl в мае?
  - Какой самый северный аэропорт?
  - Какой аэропорт самый высокогорный (находится выше всех над уровнем моря)?
  - Какие бортовые номера у самых старых самолетов?
  - Какая средняя температура воздуха была в сентябре в аэропорту John F Kennedy Intl (в градусах Цельсия).
  - Самолеты какой авиакомпании совершили больше всего вылетов в июне?
  - Самолеты какой авиакомпании задерживались чаще других в 2013 году?

Оформить отчет в соответствии с шаблоном.

## Выполнение шагов

### Шаг 1

Установим и подключим пакеты dplyr и nycflights13:

```{r}
library(dplyr)
```

```{r}
library(nycflights13)
```

### Шаг 2

Проанализируем встроенные в пакет nycflights13 наборы данных с помощью языка R и ответим на вопросы:

#### Сколько встроенных в пакет nycflights13 датафреймов?

```{r}
ls('package:nycflights13') %>% length()
```

#### Сколько строк в каждом датафрейме?

```{r}
airlines %>% nrow()
```

```{r}
airports %>% nrow()
```

```{r}
flights %>% nrow()
```

```{r}
planes %>% nrow()
```

```{r}
weather %>% nrow()
```

#### Сколько столбцов в каждом датафрейме?

```{r}
airlines %>% ncol()
```

```{r}
airports %>% ncol()
```

```{r}
flights %>% ncol()
```

```{r}
planes %>% ncol()
```

```{r}
weather %>% ncol()
```


#### Как просмотреть примерный вид датафрейма?

```{r}
airlines %>% glimpse()
```

```{r}
airports %>% glimpse()
```

```{r}
flights %>% glimpse()
```

```{r}
planes %>% glimpse()
```

```{r}
weather %>% glimpse()
```

#### Сколько компаний-перевозчиков (carrier) учитывают эти наборы данных (представлено в наборах данных)?

```{r}
airlines %>% select(carrier) %>% unique() %>% count()
```

#### Сколько рейсов принял аэропорт John F Kennedy Intl в мае?

```{r}
left_join(flights, airports, by = c("origin" = "faa")) %>% filter(name == "John F Kennedy Intl" & month == 5) %>% count()
```

#### Какой самый северный аэропорт?

```{r}
airports %>% arrange(desc(lon)) %>% select(name) %>% head(1)
```

#### Какой аэропорт самый высокогорный (находится выше всех над уровнем моря)?

```{r}
airports %>% arrange(desc(alt)) %>% select(name) %>% head(1)
```

#### Какие бортовые номера у самых старых самолетов?

```{r}
planes %>% arrange(year) %>% select(tailnum) %>% head(10)
```

#### Какая средняя температура воздуха была в сентябре в аэропорту John F Kennedy Intl (в градусах Цельсия).

```{r}
left_join(weather, airports, by = c("origin" = "faa")) %>% filter(name == "John F Kennedy Intl" & month == 9) %>% summarise(avg_t = 5/9 * (mean(temp)-32)) %>% select(avg_t)
```

#### Самолеты какой авиакомпании совершили больше всего вылетов в июне?

```{r}
left_join(flights, airlines, by = "carrier") %>% filter(month == 6) %>% count(name) %>% arrange(desc(n)) %>% select(name) %>% head(1)
```

#### Самолеты какой авиакомпании задерживались чаще других в 2013 году?

```{r}
left_join(flights, airlines, by = "carrier") %>% filter(arr_delay > 0 & year == 2013) %>% count(name) %>% arrange(desc(n)) %>% select(name) %>% head(1)
```

## Вывод

В ходе выполнения 3 практической работы были освоены практические навыки использования функций обработки данных пакета dplyr.